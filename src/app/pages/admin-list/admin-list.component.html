<div class="admin-list-container">
    <div class="content-card">
        <h1 class="page-title">
            <i class="fas fa-users-cog me-3"></i>
            Liste des Administrateurs
        </h1>
        <p class="page-subtitle">
            Gestion des comptes administrateurs de la plateforme
        </p>
        
        <!-- Debug info -->
        <div class="debug-info">
            <strong>Debug Info:</strong><br>
            Loading: {{ loading }}<br>
            Error: {{ error }}<br>
            Admins count: {{ admins.length }}<br>
            Admins data: {{ admins | json }}
        </div>
        
        <!-- Indicateur de chargement -->
        <div *ngIf="loading" class="text-center mb-4">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Chargement...</span>
            </div>
            <p class="mt-2">Chargement des administrateurs...</p>
        </div>
        
        <!-- Message d'erreur -->
        <div *ngIf="error" class="alert alert-danger text-center mb-4" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
            <button class="btn btn-outline-danger btn-sm ms-3" (click)="loadAdmins()">
                <i class="fas fa-redo me-1"></i>
                Réessayer
            </button>
        </div>
        
        <!-- Contenu principal -->
        <div *ngIf="!loading && !error">
            <div class="text-center mb-4">
                <span class="admin-count">
                    <i class="fas fa-users me-2"></i>
                    {{ admins.length }} administrateur(s)
                </span>
            </div>
            
            <div class="table-container">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    <i class="fas fa-user me-2"></i>
                                    Nom et Prénom
                                </th>
                                <th>
                                    <i class="fas fa-envelope me-2"></i>
                                    Email
                                </th>
                                <th>
                                    <i class="fas fa-cogs me-2"></i>
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let admin of admins; let i = index">
                                <td>
                                    <strong>{{ admin.user?.name || admin.name || 'N/A' }}</strong>
                                    <small class="text-muted d-block">ID: {{ admin.id }}</small>
                                </td>
                                <td>
                                    <i class="fas fa-envelope me-2 text-muted"></i>
                                    {{ admin.email || admin.admin?.email || 'N/A' }}
                                </td>
                                <td>
                                    <button class="btn btn-danger btn-sm" (click)="deleteAdmin(admin.id)">
                                        <i class="fas fa-trash me-1"></i>
                                        Supprimer
                                    </button>
                                </td>
                            </tr>
                            <tr *ngIf="admins.length === 0">
                                <td colspan="3">
                                    <div class="empty-state">
                                        <i class="fas fa-users-slash"></i>
                                        <h5>Aucun administrateur trouvé</h5>
                                        <p>La liste des administrateurs est vide.</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
