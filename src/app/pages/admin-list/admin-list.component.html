<div class="admin-list-container">
    <div class="content-card">
        <h1 class="page-title">
            <i class="fas fa-users-cog me-3"></i>
            Liste des Administrateurs
        </h1>
        
        <!-- Debug info -->
        <div class="mb-3">
            <small class="text-muted">
                <i class="fas fa-info-circle me-1"></i>
                Debug: Loading={{ loading }}, Error={{ error }}, Admins count={{ admins.length }}
            </small>
        </div>
        
        <!-- Loading indicator -->
        <div *ngIf="loading" class="text-center mb-4">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Chargement...</span>
            </div>
            <p class="mt-2">Chargement des administrateurs...</p>
        </div>
        
        <!-- Error message -->
        <div *ngIf="error && !loading" class="alert alert-danger mb-4">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
        </div>
        
        <!-- Admin count -->
        <div *ngIf="!loading && !error" class="text-center mb-4">
            <span class="admin-count">
                <i class="fas fa-users me-2"></i>
                {{ admins.length }} administrateur(s)
            </span>
        </div>
        
        <!-- Simple display for testing -->
        <div *ngIf="!loading" class="mb-4">
            <h4>Test d'affichage simple:</h4>
            <div *ngFor="let admin of admins; let i = index" class="border p-2 mb-2">
                <strong>Admin {{ i + 1 }}:</strong> {{ admin.name }} - {{ admin.admin?.email }}
            </div>
        </div>
        
        <!-- Table -->
        <div *ngIf="!loading" class="table-container">
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                <i class="fas fa-user me-2"></i>
                                Nom et Prénom
                            </th>
                            <th>
                                <i class="fas fa-envelope me-2"></i>
                                Email
                            </th>
                            <th>
                                <i class="fas fa-cogs me-2"></i>
                                Actions
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let admin of admins; let i = index">
                            <td>
                                <strong>{{ admin.name || admin.admin?.name || 'Nom non défini' }}</strong>
                                <small class="text-muted d-block">ID: {{ admin.id }}</small>
                            </td>
                            <td>
                                <i class="fas fa-envelope me-2 text-muted"></i>
                                {{ admin.admin?.email || admin.email || 'Email non défini' }}
                            </td>
                            <td>
                                <button class="btn btn-danger btn-sm" (click)="deleteAdmin(admin.id)">
                                    <i class="fas fa-trash me-1"></i>
                                    Supprimer
                                </button>
                            </td>
                        </tr>
                        <tr *ngIf="admins.length === 0 && !error">
                            <td colspan="3">
                                <div class="empty-state">
                                    <i class="fas fa-users-slash"></i>
                                    <h5>Aucun administrateur trouvé</h5>
                                    <p>La liste des administrateurs est vide.</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Refresh button -->
        <div class="text-center mt-4">
            <button class="btn btn-primary" (click)="loadAdmins()" [disabled]="loading">
                <i class="fas fa-sync-alt me-2"></i>
                Actualiser la liste
            </button>
        </div>
    </div>
</div>
